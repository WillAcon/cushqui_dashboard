import{S as ae,i as se,s as le,k as i,q as B,a as g,l as n,m as u,r as V,h as a,c as _,n as s,b as T,D as e,a8 as ee,T as oe,a7 as ie,u as ne,C as te,a1 as re,o as de}from"../chunks/index.705b3c5f.js";import{w as ce}from"../chunks/singletons.24c48214.js";import{e as ue}from"../chunks/forms.89aade81.js";const fe="ws://localhost:8000",pe=ce("");let G;if(typeof process>"u"){let d=122;console.log(d),G=new WebSocket(`${fe}/user/${d}`),G.addEventListener("open",function(r){console.log("It's open xxxxxx",r)}),G.addEventListener("message",function(r){let c=JSON.parse(r.data);if(console.log("data nn",c),c.channel==="cola1"){let f=document.getElementById("cola1");f.innerHTML+=`<p>${c.message}</p>`}else if(c.channel=="chatroom"){let f=document.getElementById("cola2"),l=["https://images.unsplash.com/photo-1531123897727-8f129e1688ce?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=facearea&facepad=4&w=256&h=256&q=80","https://images.unsplash.com/photo-1501196354995-cbb51c65aaea?ixlib=rb-1.2.1&amp;ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&amp;auto=format&amp;fit=facearea&amp;facepad=4&amp;w=256&amp;h=256&amp;q=80","https://images.unsplash.com/photo-1517841905240-472988babdf9?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=facearea&facepad=4&w=256&h=256&q=80"],p=Math.floor(Math.random()*l.length);console.log("random",p);let w=`
            <div class="flex items-center gap-4 p-4">
            <img class="w-12 h-12 rounded-full" src="${l[p]}">
            <strong class="text-slate-900 text-sm font-medium dark:text-slate-200">${c.message}</strong>
            </div>`;f.innerHTML+=w}})}else console.log("Estás ejecutando este código en Node.js");const me=d=>{console.log("Estás ejecutando este",d),G.send(JSON.stringify({topic:"message",channel:"canal1",data:d}))},he={subscribe:pe.subscribe,sendMessage:me};function ve(d){let r,c,f,l,p,w,W,q,o,h,C,y,L,M,O,E,U,$,v,H,A,D,b,I,R,Y,k,S,J,z;return{c(){r=i("h1"),c=B("WebSocket Example"),f=g(),l=i("div"),p=i("p"),w=B("Message: "),W=B(d[0]),q=g(),o=i("form"),h=i("input"),C=g(),y=i("input"),L=g(),M=i("input"),O=g(),E=i("button"),U=B("Registrar"),$=g(),v=i("div"),H=i("div"),A=g(),D=i("div"),b=i("div"),I=i("div"),R=B("Contacts"),Y=g(),k=i("div"),S=i("div"),this.h()},l(t){r=n(t,"H1",{});var m=u(r);c=V(m,"WebSocket Example"),m.forEach(a),f=_(t),l=n(t,"DIV",{});var N=u(l);p=n(N,"P",{});var F=u(p);w=V(F,"Message: "),W=V(F,d[0]),F.forEach(a),q=_(N),o=n(N,"FORM",{class:!0,method:!0,action:!0});var x=u(o);h=n(x,"INPUT",{type:!0,name:!0}),C=_(x),y=n(x,"INPUT",{type:!0,name:!0}),L=_(x),M=n(x,"INPUT",{type:!0,name:!0}),O=_(x),E=n(x,"BUTTON",{type:!0,class:!0});var K=u(E);U=V(K,"Registrar"),K.forEach(a),x.forEach(a),N.forEach(a),$=_(t),v=n(t,"DIV",{});var P=u(v);H=n(P,"DIV",{id:!0}),u(H).forEach(a),A=_(P),D=n(P,"DIV",{class:!0});var Q=u(D);b=n(Q,"DIV",{class:!0});var j=u(b);I=n(j,"DIV",{class:!0});var X=u(I);R=V(X,"Contacts"),X.forEach(a),Y=_(j),k=n(j,"DIV",{class:!0});var Z=u(k);S=n(Z,"DIV",{id:!0}),u(S).forEach(a),Z.forEach(a),j.forEach(a),Q.forEach(a),P.forEach(a),this.h()},h(){s(h,"type","text"),s(h,"name","message"),s(y,"type","hidden"),y.value="williams",s(y,"name","user"),s(M,"type","hidden"),M.value="message",s(M,"name","action"),s(E,"type","submit"),s(E,"class","bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"),s(o,"class","bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4"),s(o,"method","POST"),s(o,"action","?/save"),s(H,"id","cola1"),s(I,"class","absolute top-0 left-0 right-0 px-4 py-3 flex items-center font-semibold text-sm text-slate-900 dark:text-slate-200 bg-slate-50/90 dark:bg-slate-700/90 backdrop-blur-sm ring-1 ring-slate-900/10 dark:ring-black/10"),s(S,"id","cola2"),s(k,"class","overflow-auto flex flex-col divide-y h-80 dark:divide-slate-200/5 pt-11"),s(b,"class","relative max-w-md mx-auto bg-white dark:bg-slate-800 shadow-lg h-80 overflow-hidden ring-1 ring-slate-900/5"),s(D,"class","px-3")},m(t,m){T(t,r,m),e(r,c),T(t,f,m),T(t,l,m),e(l,p),e(p,w),e(p,W),e(l,q),e(l,o),e(o,h),ee(h,d[1]),e(o,C),e(o,y),e(o,L),e(o,M),e(o,O),e(o,E),e(E,U),T(t,$,m),T(t,v,m),e(v,H),e(v,A),e(v,D),e(D,b),e(b,I),e(I,R),e(b,Y),e(b,k),e(k,S),J||(z=[oe(h,"input",d[2]),ie(ue.call(null,o))],J=!0)},p(t,[m]){m&1&&ne(W,t[0]),m&2&&h.value!==t[1]&&ee(h,t[1])},i:te,o:te,d(t){t&&a(r),t&&a(f),t&&a(l),t&&a($),t&&a(v),J=!1,re(z)}}}function be(d,r,c){let f="",l="";de(()=>{he.subscribe(w=>{c(0,f=w)})});function p(){l=this.value,c(1,l)}return[f,l,p]}class we extends ae{constructor(r){super(),se(this,r,be,ve,le,{})}}export{we as default};
